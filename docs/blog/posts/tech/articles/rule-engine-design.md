---
title: "规则引擎——产品设计高阶思维"
date: 2024-05-21
categories:
  - 工具
---


## 规则引擎

<!-- more -->

规则引擎是一种嵌入在应用程序中的组件，它可以将业务规则从业务代码中剥离出来，使用预先定义好的语义规范来实现这些剥离出来的业务规则；规则引擎通过接受输入的数据，进行业务规则的评估，并做出业务决策。

## 规则引擎的好处

因为规则引擎将复杂的业务逻辑从业务代码中剥离出来，所以可以显著降低业务逻辑实现难度；同时，剥离的业务规则使用规则引擎实现，这样可以使多变的业务规则变的可维护，配合规则引擎提供的良好的业务规则设计器，不用编码就可以快速实现复杂的业务规则，同样，即使是完全不懂编程的业务人员，也可以轻松上手使用规则引擎来定义复杂的业务规则。

## 规则引擎架构设计

规则引擎主要包括变量中心、规则管理和规则引擎三部分组成。

变量中心：

```Markdown
变量：用于获取期望数值的脚本模型，包括变量名称、变量类型、变量获取方式、变量描述等。
属性：定义属性的码值，通常用于常量。
表达式：公式类型的规则，用于返回公式计算结果，通常包括定义入参、出参。
```

规则管理

```Markdown
规则定义：描述一条匹配关系及匹配后返回结果，一个普通规则主体是由如果、那么、否则三部分构成。
计算公式：公式类型的规则，用于返回公式计算结果
规则文件：
规则集：一组简单的规则集合
决策表：一组匹配条件相近的规则的集合
评分卡：
决策树：
规则流：
```

规则引擎

执行单元：规则引擎的管理单元，执行单元下包含一个或者多个决策表/规则集/计算公式

暂时无法在飞书文档外展示此内容

## 保险核心系统规则引擎的应用

规则引擎是系统设计中常用的一种思路，它通过抽象高通用性的业务规则，通过规则配置的方式增加了系统的通用性和延展性，因此也是产品经理所必备的一种技能。

在保险核心系统中，规则引擎也可以被引用在各个系统内。

这里以投保规则进行举例。

### 投保规则

<!-- 警告：此图片链接已过期，显示为占位图片 -->
![图片已过期](../../assets/images/placeholder.png)<!-- 警告：此图片链接已过期，显示为占位图片 -->
![图片已过期](../../assets/images/placeholder.png)<!-- 警告：此图片链接已过期，显示为占位图片 -->
![图片已过期](../../assets/images/placeholder.png)

<!-- 警告：此图片链接已过期，显示为占位图片 -->
![图片已过期](../../assets/images/placeholder.png)<!-- 警告：此图片链接已过期，显示为占位图片 -->
![图片已过期](../../assets/images/placeholder.png)<!-- 警告：此图片链接已过期，显示为占位图片 -->
![图片已过期](../../assets/images/placeholder.png)<!-- 警告：此图片链接已过期，显示为占位图片 -->
![图片已过期](../../assets/images/placeholder.png)

通过上图，我们可以初步得出，投保的规则涉及也比较多，抽象出来分为几类：

1.  投保录入选项：定义变量，比如缴费期间、保额等等
    
2.  投保规则（集）：包括单一规则和联动规则两种。单一规则比如年龄不得大于70周岁，联动规则比如当选择缴费期间为保终身时，保额不得超过60万。
    
3.  费率决策表：基于投保录入选项，返回所交保费
    
4.  其他规则：比如未成年保额规则、反洗钱规则等等。
    

### 投保录入选项

常用的投保录入选项如下：

*   投保标的基础信息
    
    *   标的是人：投保人、被保人、受益人
        
    *   标的是宠物：宠物、宠物年龄
        
    *   标的是公司主体：公司名称、注册省市、详细地址
        
    *   其他标的.....
        
*   保障计划
    
    *   保障计划/可选险种/可选责任
        
    *   保额/保费
        
    *   缴费方式：年交/月交
        
    *   缴费期间：终身/30年/20年...
        
    *   保障期间：终身/30年/1年/1天
        
    *   领取年龄（年金险特有）
        

我们通过引入变量的方式可以实现，投保录入选项的管理。

第一步：设定变量

```Markdown
变量名称：缴费期间
变量类型：单选
属性：终身/30年/20年
变量获取方式：脚本获取
变量描述：
```

第二步：设定规则

```Markdown
单一规则
选择变量：选择缴费期间
设定规则：
入参是选择属性下拉选项，返回参数为true

联动规则
假设需要录入的规则是：当选择缴费期间为保终身时，保额不得超过60万。
选择变量时：缴费期间、保额
设定规则：
if 缴费期间=终身，then 保额<=60万 ，else end
```

第三步：费率决策表

```Markdown
选择变量
设定入参、出参
```

其他规则

```Markdown
通用规则设定：比如未成年保额规则、反洗钱规则
```