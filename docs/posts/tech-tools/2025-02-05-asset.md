
---
categories: ""
  - "技术工具
date: "2025-02-05'
description: ""前端设计\U0001F3E0 My Financial Home  [欢迎区] ┌─────────────────────────────────────────┐
  │ 早安，[用户名]                          │ │ 今日财务健康度：92分 ｜ 较上月：↑3分     │ └──...
image: "/assets/images/posts/tech-tools/2025-02-05-asset/''"
original_title: "asset"
---published: true
tags: ""
  - "Cursor GitHub Notion 技术
title: "asset"
\1: "''"
---
---
月度绝对收益| formula| -  
月度绝对收益率| formula| -  
期末金额| number| -  
投入本金| number| -  
货币类型| select| CNY
  - "USD
  - "HKD
  - "USDT  
类型| select| 资产
  - "负债  
备注| rich_text| -  
上次编辑时间| last_edited_time| -  
归属人| select| dada
  - "panpan  
账户| rich_text| -  
期初金额| number| -  
是否计算投资理财收益| select| 是
  - "否  
创建时间| created_time| -  
大类| select| 流动资产
  - "固定资产
  - "投资理财
  - "应收款
  - "流动负债
  - "固定负债  
子类型| select| 现金
  - "银行活期
  - "货币基金
  - "自用房产
  - "自用汽车
  - "投资房产
  - "金银珠宝
  - "其他固定资产
  - "基金
  - "股票
  - "银行理财
  - "投资保险
  - "加密货币
  - "借给他人的钱
  - "信用卡
  - "教育贷款
  - "借出款项
  - "报销待收
  - "投资待收
  - "消费贷
  - "房贷
  - "车贷  
记账年月| title| -  
  
### Liability_record

数据库：196ed4b7aaea80e1a3b5c447aa315e60

字段| 类型| 选项  
---
---
月度绝对收率| formula| -  
账户| select| 基金-中信
  - "基金-理财通
  - "基金-雪球稳钱账户
  - "保单-增额寿（外借）
  - "股票投资-中信
  - "保单-增额寿
  - "保单-万能账户
  - "基金-招行
  - "定存（大连银行）
  - "基金-雪球长钱账户
  - "基金-雪球海外账户  
子类型| select| 基金
  - "投资保险
  - "股票
  - "银行理财  
变动额| formula| -  
投入本金| number| -  
大类| select| 投资理财  
是否计算投资理财收益| select| 是
  - "否  
记账年份| select| 2024年
  - "2025年  
类型| select| 资产  
创建时间| date| -  
备注| rich_text| -  
期初金额| number| -  
货币类型| select| CNY  
上次编辑时间| date| -  
归属人| select| panpan
  - "dada  
期末金额| number| -  
记账年月| title| -  
      
    
    Investment_Analysis 197ed4b7aaea807a82f4ee47f375d603
    Balance_Analysis 196ed4b7aaea800eaf44ef77e719dda0
前端设计
    
    
    🏠 My Financial Home
    
    [欢迎区]
    ┌─────────────────────────────────────────┐
    │ 早安，[用户名]                          │
    │ 今日财务健康度：92分 ｜ 较上月：↑3分     │
    └─────────────────────────────────────────┘
    
    [核心指标区 - 三卡片]
    ┌─────────────┐ ┌─────────────┐ ┌─────────────┐
    │💎 净资产    │ │📈 投资理财   │ │🎯 月度储蓄  │
    │2,234,712   │ │1,505,474    │ │31,900      │
    │较上月+4.8% │ │收益率+8.3%   │ │目标完成106% │
    └─────────────┘ └─────────────┘ └─────────────┘
    
    [月度变化分析区 - 双栏]
    ┌─────────────────────────────┐ ┌─────────────────────────────┐
    │ 📊 资产负债月度趋势          │ │ 💰 现金流月度分析            │
    │                             │ │                             │
    │ [折线图]                    │ │ [堆叠柱状图]                │
    │ 蓝线 - 净资产               │ │ 绿色 - 收入                 │
    │ 绿线 - 总资产               │ │ 红色 - 支出                 │
    │ 红线 - 总负债               │ │ 蓝色 - 储蓄                 │
    │                             │ │                             │
    │ 2023.10 - 2024.03          │ │ 2023.10 - 2024.03          │
    │                             │ │                             │
    │ 本月变化：                   │ │ 本月概况：                  │
    │ • 净资产 +93,689           │ │ • 收入 82,500              │
    │ • 总资产 +56,800           │ │ • 支出 50,600              │
    │ • 总负债 -36,889           │ │ • 储蓄 31,900              │
    └─────────────────────────────┘ └─────────────────────────────┘
    
    [生活目标区]
    ┌─────────────────────┐ ┌─────────────────────┐
    │   🏠 房产计划        │ │   👶 教育基金        │
    │   首付累计进度      │ │   积累进度          │
    │   目标：100万       │ │   目标：50万        │
    │   当前：68万        │ │   当前：17.5万      │
    │   [进度条 68%]      │ │   [进度条 35%]      │
    └─────────────────────┘ └─────────────────────┘
    
    [理财诊断区]
    ┌─────────────────────────────────────────┐
    │ 📋 本月理财体检                         │
    │ • 收入稳定增长，较去年同期增长15%       │
    │ • 支出控制良好，较预算节省8%            │
    │ • 储蓄率31.2%，达到建议水平             │
    │ • 投资组合需要再平衡                    │
    │ • 保险保障存在缺口                      │
    └─────────────────────────────────────────┘
    
    [行动建议区]
    ┌─────────────────────────────────────────┐
    │ ✨ 智能建议                             │
    │ 1. 当前储蓄率良好，建议：               │
    │    • 将超额储蓄用于投资组合再平衡       │
    │    • 考虑增加定投金额                   │
    │                                        │
    │ 2. 支出优化空间：                       │
    │    • 本月餐饮支出偏高                   │
    │    • 考虑开源节流计划                   │
    │                                        │
    │ 3. 资产配置建议：                       │
    │    • 适当降低现金持有                   │
    │    • 增加权益类资产配置                 │
    └─────────────────────────────────────────┘

分类
    
    
    CREATE TABLE 资产数据库 (
        -- 基础信息
        id VARCHAR(36) PRIMARY KEY COMMENT '唯一标识符',
        创建时间 DATETIME COMMENT '记录创建时间',
        上次编辑时间 DATETIME COMMENT '最后修改时间',
        
        -- 核心分类体系（包含三级联动关系）
        类型 ENUM('资产', '负债') COMMENT '资产/负债类型',
        大类 ENUM(
            '流动资产', '固定资产', '投资理财', '应收款',
            '流动负债', '固定负债'
        ) COMMENT '资产分类大类',
        子类型 VARCHAR(50) COMMENT '资产具体子类型',
        
        -- 分类关联约束（实现三级联动）
        FOREIGN KEY (类型, 大类) REFERENCES 分类体系(类型, 大类),
        FOREIGN KEY (大类, 子类型) REFERENCES 子分类体系(大类, 子类型),
    
        -- 财务数据
        期初金额 DECIMAL(18,4) COMMENT 'Opening Balance',
        期末金额 DECIMAL(18,4) COMMENT 'Closing Balance',
        投入本金 DECIMAL(18,4) COMMENT 'Initial Investment',
        
        -- 计算字段
        净值变动 VARCHAR(255) COMMENT '期末金额 - 期初金额',
        收益率 VARCHAR(255) COMMENT '(期末金额-投入本金)/投入本金',
        月度变化率 VARCHAR(255) COMMENT '(期末金额-期初金额)/期初金额',
        
        -- 其他属性
        货币类型 ENUM('CNY', 'USD', 'HKD', 'USDT') COMMENT '货币种类',
        账户 TEXT COMMENT '关联账户信息',
        归属人 ENUM('dada', 'panpan') COMMENT '资产所有权人',
        记账月份 VARCHAR(7) COMMENT 'YYYY-MM格式月份',
        备注 TEXT COMMENT '自由格式备注',
        
        -- 系统字段
        is_inline BOOLEAN COMMENT '是否内联数据库',
        url VARCHAR(255) COMMENT 'Notion链接'
    ) COMMENT '资产负债管理系统';
    
    -- 分类体系关联表
    CREATE TABLE 分类体系 (
        类型 ENUM('资产', '负债') PRIMARY KEY,
        大类 ENUM(
            '流动资产', '固定资产', '投资理财', '应收款',
            '流动负债', '固定负债'
        ),
        允许组合 ENUM('Y','N') DEFAULT 'Y'
    );
    
    -- 子分类体系表
    CREATE TABLE 子分类体系 (
        大类 ENUM(
            '流动资产', '固定资产', '投资理财', '应收款',
            '流动负债', '固定负债'
        ),
        子类型 VARCHAR(50),
        类型约束 ENUM('资产', '负债'),
        PRIMARY KEY (大类, 子类型),
        FOREIGN KEY (类型约束) REFERENCES 分类体系(类型)
    );
    
    -- 插入分类体系数据示例
    INSERT INTO 分类体系 (类型, 大类) VALUES
    ('资产', '流动资产'),
    ('资产', '固定资产'),
    ('资产', '投资理财'),
    ('资产', '应收款'),
    ('负债', '流动负债'),
    ('负债', '固定负债');
    
    -- 插入子分类数据示例
    INSERT INTO 子分类体系 (大类, 子类型, 类型约束) VALUES
    ('流动资产', '现金', '资产'),
    ('流动资产', '银行活期', '资产'),
    ('流动资产', '货币基金', '资产'),
    ('流动资产', '其他流动资产', '资产'),
    ('固定资产', '自用房产', '资产'),
    ('固定资产', '自用汽车', '资产'),
    ('固定资产', '投资房产', '资产'),
    ('固定资产', '金银珠宝', '资产'),
    ('固定资产', '收藏品', '资产'),
    ('固定资产', '数码电子', '资产'),
    ('固定资产', '其他固定资产', '资产'),
    ('投资理财', '基金', '资产'),
    ('投资理财', '股票', '资产'),
    ('投资理财', '银行理财', '资产'),
    ('投资理财', '投资保险', '资产'),
    ('投资理财', '加密货币', '资产'),
    ('投资理财', '其他投资理财', '资产'),
    ('应收款', '借给他人的钱', '资产'),
    ('应收款', '其他应收款', '资产'),
    ('流动负债', '信用卡', '负债'),
    ('流动负债', '消费贷', '负债'),
    ('流动负债', '其他短期消费性负债', '负债'),
    ('固定负债', '房贷', '负债'),
    ('固定负债', '车贷', '负债'),
    ('固定负债', '其他固定负债', '负债');
    

  

## 设计方案

## 设计前提

  ***notion的Integration Token：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*****NOTION_PAGE_ID=18dca1806c5b8058a1eac5390ebeb973*****NOTION_DATABASE_ID=191ca1806c5b812fb4f3e3f3e5135cfe*** * *

##  我的需求内容

  1. 制作一个资产负债工具，用于更新家庭资产/负债情况。
  2. 生成相关统计报表，包括家庭总资产。

* * *

## 设计方案步骤

  1.**设计数据库**：完成数据库表的设计。
  2.**前端开发**：进行Notion页面的前端设计。
  3.**后端开发**：实现后端逻辑和自动化任务。
  4.**每次开发前**：需要征求我的同意。

* * *

## 开发注意事项

### 1\. 数据库开发

#### 开发范围

  ***设计数据库结构**：

    * 在Notion中创建数据库，定义字段（如文本、数字、日期、选择、关系等）。
    * 设计分类、标签、状态等字段，确保数据结构清晰。

  ***数据关联**：

    * 使用Relation字段关联不同的数据库（如“交易记录”关联“分类”）。
    * 使用Rollup字段汇总关联数据（如计算某个分类的总支出）。

  ***数据导入/导出**：

    * 通过Notion API实现数据的批量导入或导出。
    * 将外部数据（如Excel、CSV）导入Notion数据库。

#### 注意事项

  1.**提前规划数据结构**：

    * 明确每个字段的用途和数据类型，避免后期修改字段类型导致数据丢失。

  2.**避免过度嵌套**：

    * 保持数据结构扁平化，避免性能问题。

  3.**备份数据**：

    * 定期备份Notion数据库，避免数据丢失。

* * *

### 2\. 前端开发

#### 开发范围

  ***Notion页面设计**：

    * 使用Notion的块（Blocks）功能设计页面布局。
    * 创建模板页面，提高创建效率。

  ***自定义UI**：

    * 使用Notion API或第三方工具嵌入自定义UI组件（如图表、表单）。
    * 使用Web Clipper功能嵌入外部内容。

  ***交互功能**：

    * 实现简单的交互逻辑（如按钮、公式字段）。

#### 注意事项

  1.**保持页面简洁**：

    * 避免过多嵌入内容，确保加载速度。

  2.**测试跨设备兼容性**：

    * 确保页面在不同设备上正常显示。

  3.**优化嵌入内容**：

    * 确保嵌入内容加载速度快，不影响页面性能。

* * *

### 3\. 后端代码实现

#### 开发范围

  ***Notion API集成**：

    * 实现数据的增删改查（CRUD）操作。
    * 实现自动化任务（如定时同步数据、发送提醒）。

  ***业务逻辑开发**：

    * 实现预算计算、支出分类、报告生成等逻辑。
    * 使用Python、JavaScript等语言编写代码。

#### 注意事项

  1.**合理使用API限额**：

    * 避免频繁调用API导致请求失败。

  2.**错误处理**：

    * 增加错误处理逻辑，避免程序崩溃。

  3.**数据安全**：

    * 保护敏感信息，如集成Token和数据库ID。

* * *

### 4\. 开发流程优化

#### 注意事项

  1.**版本控制**：

    * 使用Git管理代码，定期提交和备份。

  2.**模块化开发**：

    * 将代码拆分为多个模块，提高可维护性。

  3.**测试驱动开发**：

    * 编写单元测试和集成测试，确保代码质量。

  4.**文档记录**：

    * 记录数据库设计、API接口、代码逻辑等。

* * *

### 5\. 避免返工的关键点

  1.**明确需求**：

    * 开发前明确需求，避免需求变更导致返工。

  2.**原型设计**：

    * 设计原型，确保设计方案可行。

  3.**逐步迭代**：

    * 逐步实现功能，避免一次性开发过多功能。

  4.**代码复用**：

    * 封装常用功能，减少重复代码。

  5.**定期沟通**：

    * 定期沟通进度和问题，避免沟通不畅导致返工。

* * *

### 6\. 工具推荐

  1.**Notion API文档**：

    * [Notion API官方文档](https://developers.notion.com/)（如果无法访问，请检查链接或稍后重试）

  2.**Notion客户端库**：

    * [notion-client（Python）](https://github.com/ramnes/notion-sdk-py) 或 [notion-sdk-js（JavaScript）](https://github.com/makenotion/notion-sdk-js)（如果无法访问，请检查链接或稍后重试）

  3.**调试工具**：

    * 使用Postman测试Notion API请求。
    * 使用Cursor调试代码。

  4.**自动化工具**：

    * 使用Zapier或Make实现无代码自动化任务。

  

## notion 数据库整理

### Asset_record

数据库：195ed4b7aaea809cb0a1ea76f34fed89

字段| 类型| 选项  
---
月度绝对收益| formula| -  
月度绝对收益率| formula| -  
期末金额| number| -  
投入本金| number| -  
货币类型| select| CNY, USD, HKD, USDT  
类型| select| 资产, 负债  
备注| rich_text| -  
上次编辑时间| last_edited_time| -  
归属人| select| dada, panpan  
账户| rich_text| -  
期初金额| number| -  
是否计算投资理财收益| select| 是, 否  
创建时间| created_time| -  
大类| select| 流动资产, 固定资产, 投资理财, 应收款, 流动负债, 固定负债  
子类型| select| 现金, 银行活期, 货币基金, 自用房产, 自用汽车, 投资房产, 金银珠宝, 其他固定资产, 基金, 股票, 银行理财, 投资保险, 加密货币, 借给他人的钱, 信用卡, 教育贷款, 借出款项, 报销待收, 投资待收, 消费贷, 房贷, 车贷  
记账年月| title| -  
  
### Liability_record

数据库：196ed4b7aaea80e1a3b5c447aa315e60

字段| 类型| 选项  
---
净值变动| formula| -  
期末金额| number| -  
投入本金| number| -  
货币类型| select| CNY, USD, HKD, USDT  
月度变化率| formula| -  
类型| select| 资产, 负债  
备注| rich_text| -  
收益率| formula| -  
上次编辑时间| last_edited_time| -  
归属人| select| dada, panpan  
账户| rich_text| -  
期初金额| number| -  
创建时间| created_time| -  
大类| select| 流动资产, 固定资产, 投资理财, 应收款, 流动负债, 固定负债  
子类型| select| 现金, 银行活期, 货币基金, 自用房产, 自用汽车, 投资房产, 金银珠宝, 其他固定资产, 基金, 股票, 银行理财, 投资保险, 加密货币, 借给他人的钱, 信用卡, 教育贷款, 借出款项, 报销待收, 投资待收, 消费贷, 房贷, 车贷  
记账年月| title| -  
  
## 录入资产负债数据

录入信息如下
    
    
    字段	类型	选项
    类型	select	资产, 负债
    大类	select	流动资产, 固定资产, 投资理财, 应收款, 流动负债, 固定负债
    子类型	select	现金, 银行活期, 货币基金, 自用房产, 自用汽车, 投资房产, 金银珠宝, 其他固定资产, 基金, 股票, 银行理财, 投资保险, 加密货币, 借给他人的钱, 信用卡, 教育贷款, 借出款项, 报销待收, 投资待收, 消费贷, 房贷, 车贷
    账户	rich_text	-
    投入本金	number	-
    期初金额	number	-
    期末金额	number	-
    货币类型	select	CNY, USD, HKD, USDT >>默认是CNY
    备注	rich_text	-
    归属人	select	dada, panpan
    是否计算投资理财收益	select	是, 否>>当大类是投资理财才出现该选项
    创建时间	created_time>>系统时间
    记账年月	title >>默认是记账年月的上个月

录入完成后

1.当录入的类型是资产时，更新Asset_record 数据；当录入的类型是负债时，更新Asset_record 数据；

2.当录入资产负债数据时

大类=投资理财

是否计算投资理财收益=是

需要同时更新Asset_record和Investment_record表

  

    
    
    -- 核心分类体系（包含三级联动关系）
        类型 ENUM('资产', '负债') COMMENT '资产/负债类型',
        大类 ENUM(
            '流动资产', '固定资产', '投资理财', '应收款',
            '流动负债', '固定负债'
        ) COMMENT '资产分类大类',
        子类型 VARCHAR(50) COMMENT '资产具体子类型',
        
        -- 分类关联约束（实现三级联动）
        FOREIGN KEY (类型, 大类) REFERENCES 分类体系(类型, 大类),
        FOREIGN KEY (大类, 子类型) REFERENCES 子分类体系(大类, 子类型),
    
    -- 插入分类体系数据示例
    INSERT INTO 分类体系 (类型, 大类) VALUES
    ('资产', '流动资产'),
    ('资产', '固定资产'),
    ('资产', '投资理财'),
    ('资产', '应收款'),
    ('负债', '流动负债'),
    ('负债', '固定负债');
    
    -- 插入子分类数据示例
    INSERT INTO 子分类体系 (大类, 子类型, 类型约束) VALUES
    
    ('流动资产', '现金', '资产'),
    ('流动资产', '银行活期', '资产'),
    ('流动资产', '货币基金', '资产'),
    ('流动资产', '其他流动资产', '资产'),
    ('固定资产', '自用房产', '资产'),
    ('固定资产', '自用汽车', '资产'),
    ('固定资产', '投资房产', '资产'),
    ('固定资产', '金银珠宝', '资产'),
    ('固定资产', '收藏品', '资产'),
    ('固定资产', '数码电子', '资产'),
    ('固定资产', '其他固定资产', '资产'),
    ('投资理财', '基金', '资产'),
    ('投资理财', '股票', '资产'),
    ('投资理财', '银行理财', '资产'),
    ('投资理财', '投资保险', '资产'),
    ('投资理财', '加密货币', '资产'),
    ('投资理财', '其他投资理财', '资产'),
    ('应收款', '借给他人的钱', '资产'),
    ('应收款', '其他应收款', '资产'),
    ('流动负债', '信用卡', '负债'),
    ('流动负债', '消费贷', '负债'),
    ('流动负债', '其他短期消费性负债', '负债'),
    ('固定负债', '房贷', '负债'),
    ('固定负债', '车贷', '负债'),
    ('固定负债', '其他固定负债', '负债');

### Investment_record 

数据库：197ed4b7aaea8066a6c8f629704cc268

字段| 类型| 选项  
---
月度绝对收率| formula| -  
账户| select| 基金-中信, 基金-理财通, 基金-雪球稳钱账户, 保单-增额寿（外借）, 股票投资-中信, 保单-增额寿, 保单-万能账户, 基金-招行, 定存（大连银行）, 基金-雪球长钱账户, 基金-雪球海外账户  
子类型| select| 基金, 投资保险, 股票, 银行理财  
变动额| formula| -  
投入本金| number| -  
大类| select| 投资理财  
是否计算投资理财收益| select| 是, 否  
记账年份| select| 2024年, 2025年  
类型| select| 资产  
创建时间| date| -  
备注| rich_text| -  
期初金额| number| -  
货币类型| select| CNY  
上次编辑时间| date| -  
归属人| select| panpan, dada  
期末金额| number| -  
记账年月| title| -  
      
    
    Investment_Analysis 197ed4b7aaea807a82f4ee47f375d603
    Balance_Analysis 196ed4b7aaea800eaf44ef77e719dda0
