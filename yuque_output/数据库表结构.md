---
title: 数据库表结构
url: https://www.yuque.com/dadadada_up/pm/cbbhvzni5loz84vb
type: DOC
path: 数据库表结构
---

返回文档

1、 数据库表结构设计  


1.1 数据关系  
1用户与账本：每个用户至少有一个账本。  
2账本与账目分类：每个账本有一个且仅有一个账目分类。  
3账本与交易记录：每个账本可以有多个交易记录。  
4交易记录与账目分类：每个交易记录属于一个账目分类。  
5账本与成员：一个账本可以有多个成员。  
6账本与管理员：一个账本可以有多个管理员。  
7账本与创建者：一个账本有一个创建者。  


![](https://cdn.nlark.com/yuque/__mermaid_v3/751ff8b149ce49f7be0294c1df64e3ee.svg)

  


1.2 数据库表明细  
​

数据库表结构定义

JavaScript

运行代码

复制代码

999

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

26

27

28

29

30

31

32

33

34

35

36

/\*\*

\* 数据库表结构定义

\*/

  


// 用户表 \(user\)

const userSchema = \{

id: Number, // 自增主键

user\_id: String, // 业务主键

openid: String, // 微信openid

user\_nickname: String,// 用户昵称

user\_avatar: String, // 用户头像

user\_gender: Number, // 性别 0-未知 1-男 2-女

user\_mobile: String, // 手机号（可选）

user\_last\_login: Date,// 最近登录时间

create\_time: Date, // 创建时间

update\_time: Date // 更新时间

\}

  


// 账本表 \(account\_book\)

const accountBookSchema = \{

id: Number, // 自增主键

accountBook\_id: String, // 业务主键

user\_id: String, // 创建者ID

user\_nickname: String,// 创建者昵称

accountBook\_name: String, // 账本名称

accountBook\_type: String, // 账本类型：'personal'个人/'shared'共享

is\_default: Boolean,// 是否默认账本

create\_time: Date,

update\_time: Date

\}

  


// 账本成员表 \(account\_book\_member\)

const accountBookMemberSchema = \{

id: Number, // 自增主键

member\_id: String, // 业务主键

accountBook\_id: String, // 关联账本ID

2、关键数据流程  


2.1 用户登陆流程  


![](https://cdn.nlark.com/yuque/__mermaid_v3/e31a232bdf6b139a80cad59c01c49dd0.svg)

2.2 小程序初始化流程  


![](https://cdn.nlark.com/yuque/__mermaid_v3/3dfde25725ed82e6e7a22184f61707af.svg)

2.3 记账模块功能  


2.3.1 记账流程  


![](https://cdn.nlark.com/yuque/__mermaid_v3/3272b8b0899950653819fbd6d55403b9.svg)

  


2.3.1 账本管理流程  


![](data:image/svg+xml;utf8,%3Csvg%20aria-roledescription%3D%22flowchart-v2%22%20role%3D%22graphics-document%20document%22%20viewBox%3D%22-8%20-8%20678.5%20331%22%20style%3D%22max-width%3A%20678.5px%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22678.5%22%20id%3D%22svg%22%20height%3D%22331%22%3E%3Cstyle%3E%23svg%7Bfont-family%3A%22trebuchet%20ms%22%2Cverdana%2Carial%2Csans-serif%3Bfont-size%3A16px%3Bfill%3A%23333%3B%7D%23svg%20.error-icon%7Bfill%3A%23552222%3B%7D%23svg%20.error-text%7Bfill%3A%23552222%3Bstroke%3A%23552222%3B%7D%23svg%20.edge-thickness-normal%7Bstroke-width%3A2px%3B%7D%23svg%20.edge-thickness-thick%7Bstroke-width%3A3.5px%3B%7D%23svg%20.edge-pattern-solid%7Bstroke-dasharray%3A0%3B%7D%23svg%20.edge-pattern-dashed%7Bstroke-dasharray%3A3%3B%7D%23svg%20.edge-pattern-dotted%7Bstroke-dasharray%3A2%3B%7D%23svg%20.marker%7Bfill%3A%23333333%3Bstroke%3A%23333333%3B%7D%23svg%20.marker.cross%7Bstroke%3A%23333333%3B%7D%23svg%20svg%7Bfont-family%3A%22trebuchet%20ms%22%2Cverdana%2Carial%2Csans-serif%3Bfont-size%3A16px%3B%7D%23svg%20.label%7Bfont-family%3A%22trebuchet%20ms%22%2Cverdana%2Carial%2Csans-serif%3Bcolor%3A%23333%3B%7D%23svg%20.cluster-label%20text%7Bfill%3A%23333%3B%7D%23svg%20.cluster-label%20span%2C%23svg%20p%7Bcolor%3A%23333%3B%7D%23svg%20.label%20text%2C%23svg%20span%2C%23svg%20p%7Bfill%3A%23333%3Bcolor%3A%23333%3B%7D%23svg%20.node%20rect%2C%23svg%20.node%20circle%2C%23svg%20.node%20ellipse%2C%23svg%20.node%20polygon%2C%23svg%20.node%20path%7Bfill%3A%23ECECFF%3Bstroke%3A%239370DB%3Bstroke-width%3A1px%3B%7D%23svg%20.flowchart-label%20text%7Btext-anchor%3Amiddle%3B%7D%23svg%20.node%20.katex%20path%7Bfill%3A%23000%3Bstroke%3A%23000%3Bstroke-width%3A1px%3B%7D%23svg%20.node%20.label%7Btext-align%3Acenter%3B%7D%23svg%20.node.clickable%7Bcursor%3Apointer%3B%7D%23svg%20.arrowheadPath%7Bfill%3A%23333333%3B%7D%23svg%20.edgePath%20.path%7Bstroke%3A%23333333%3Bstroke-width%3A2.0px%3B%7D%23svg%20.flowchart-link%7Bstroke%3A%23333333%3Bfill%3Anone%3B%7D%23svg%20.edgeLabel%7Bbackground-color%3A%23e8e8e8%3Btext-align%3Acenter%3B%7D%23svg%20.edgeLabel%20rect%7Bopacity%3A0.5%3Bbackground-color%3A%23e8e8e8%3Bfill%3A%23e8e8e8%3B%7D%23svg%20.labelBkg%7Bbackground-color%3Argba\(232%2C%20232%2C%20232%2C%200.5\)%3B%7D%23svg%20.cluster%20rect%7Bfill%3A%23ffffde%3Bstroke%3A%23aaaa33%3Bstroke-width%3A1px%3B%7D%23svg%20.cluster%20text%7Bfill%3A%23333%3B%7D%23svg%20.cluster%20span%2C%23svg%20p%7Bcolor%3A%23333%3B%7D%23svg%20div.mermaidTooltip%7Bposition%3Aabsolute%3Btext-align%3Acenter%3Bmax-width%3A200px%3Bpadding%3A2px%3Bfont-family%3A%22trebuchet%20ms%22%2Cverdana%2Carial%2Csans-serif%3Bfont-size%3A12px%3Bbackground%3Ahsl\(80%2C%20100%25%2C%2096.2745098039%25\)%3Bborder%3A1px%20solid%20%23aaaa33%3Bborder-radius%3A2px%3Bpointer-events%3Anone%3Bz-index%3A100%3B%7D%23svg%20.flowchartTitleText%7Btext-anchor%3Amiddle%3Bfont-size%3A18px%3Bfill%3A%23333%3B%7D%23svg%20.today%7Bdisplay%3Anone%3B%7D%23svg%20.label%20foreignObject%7Boverflow%3Avisible%3B%7D%23svg%20%3Aroot%7B--mermaid-font-family%3A%22trebuchet%20ms%22%2Cverdana%2Carial%2Csans-serif%3B%7D%3C%2Fstyle%3E%3Cg%3E%3Cmarker%20orient%3D%22auto%22%20markerHeight%3D%2212%22%20markerWidth%3D%2212%22%20markerUnits%3D%22userSpaceOnUse%22%20refY%3D%225%22%20refX%3D%226%22%20viewBox%3D%220%200%2010%2010%22%20class%3D%22marker%20flowchart%22%20id%3D%22svg_flowchart-pointEnd%22%3E%3Cpath%20style%3D%22stroke-width%3A%201%3B%20stroke-dasharray%3A%201%2C%200%3B%22%20class%3D%22arrowMarkerPath%22%20d%3D%22M%200%200%20L%2010%205%20L%200%2010%20z%22%3E%3C%2Fpath%3E%3C%2Fmarker%3E%3Cmarker%20orient%3D%22auto%22%20markerHeight%3D%2212%22%20markerWidth%3D%2212%22%20markerUnits%3D%22userSpaceOnUse%22%20refY%3D%225%22%20refX%3D%224.5%22%20viewBox%3D%220%200%2010%2010%22%20class%3D%22marker%20flowchart%22%20id%3D%22svg_flowchart-pointStart%22%3E%3Cpath%20style%3D%22stroke-width%3A%201%3B%20stroke-dasharray%3A%201%2C%200%3B%22%20class%3D%22arrowMarkerPath%22%20d%3D%22M%200%205%20L%2010%2010%20L%2010%200%20z%22%3E%3C%2Fpath%3E%3C%2Fmarker%3E%3Cmarker%20orient%3D%22auto%22%20markerHeight%3D%2211%22%20markerWidth%3D%2211%22%20markerUnits%3D%22userSpaceOnUse%22%20refY%3D%225%22%20refX%3D%2211%22%20viewBox%3D%220%200%2010%2010%22%20class%3D%22marker%20flowchart%22%20id%3D%22svg_flowchart-circleEnd%22%3E%3Ccircle%20style%3D%22stroke-width%3A%201%3B%20stroke-dasharray%3A%201%2C%200%3B%22%20class%3D%22arrowMarkerPath%22%20r%3D%225%22%20cy%3D%225%22%20cx%3D%225%22%3E%3C%2Fcircle%3E%3C%2Fmarker%3E%3Cmarker%20orient%3D%22auto%22%20markerHeight%3D%2211%22%20markerWidth%3D%2211%22%20markerUnits%3D%22userSpaceOnUse%22%20refY%3D%225%22%20refX%3D%22-1%22%20viewBox%3D%220%200%2010%2010%22%20class%3D%22marker%20flowchart%22%20id%3D%22svg_flowchart-circleStart%22%3E%3Ccircle%20style%3D%22stroke-width%3A%201%3B%20stroke-dasharray%3A%201%2C%200%3B%22%20class%3D%22arrowMarkerPath%22%20r%3D%225%22%20cy%3D%225%22%20cx%3D%225%22%3E%3C%2Fcircle%3E%3C%2Fmarker%3E%3Cmarker%20orient%3D%22auto%22%20markerHeight%3D%2211%22%20markerWidth%3D%2211%22%20markerUnits%3D%22userSpaceOnUse%22%20refY%3D%225.2%22%20refX%3D%2212%22%20viewBox%3D%220%200%2011%2011%22%20class%3D%22marker%20cross%20flowchart%22%20id%3D%22svg_flowchart-crossEnd%22%3E%3Cpath%20style%3D%22stroke-width%3A%202%3B%20stroke-dasharray%3A%201%2C%200%3B%22%20class%3D%22arrowMarkerPath%22%20d%3D%22M%201%2C1%20l%209%2C9%20M%2010%2C1%20l%20-9%2C9%22%3E%3C%2Fpath%3E%3C%2Fmarker%3E%3Cmarker%20orient%3D%22auto%22%20markerHeight%3D%2211%22%20markerWidth%3D%2211%22%20markerUnits%3D%22userSpaceOnUse%22%20refY%3D%225.2%22%20refX%3D%22-1%22%20viewBox%3D%220%200%2011%2011%22%20class%3D%22marker%20cross%20flowchart%22%20id%3D%22svg_flowchart-crossStart%22%3E%3Cpath%20style%3D%22stroke-width%3A%202%3B%20stroke-dasharray%3A%201%2C%200%3B%22%20class%3D%22arrowMarkerPath%22%20d%3D%22M%201%2C1%20l%209%2C9%20M%2010%2C1%20l%20-9%2C9%22%3E%3C%2Fpath%3E%3C%2Fmarker%3E%3Cg%20class%3D%22root%22%3E%3Cg%20class%3D%22clusters%22%3E%3C%2Fg%3E%3Cg%20class%3D%22edgePaths%22%3E%3Cpath%20marker-end%3D%22url\(%23svg_flowchart-pointEnd\)%22%20style%3D%22fill%3Anone%3B%22%20class%3D%22edge-thickness-normal%20edge-pattern-solid%20flowchart-link%20LS-A%20LE-B%22%20id%3D%22L-A-B-0%22%20d%3D%22M233.5%2C25.274L201.167%2C31.228C168.833%2C37.183%2C104.167%2C49.091%2C71.833%2C58.329C39.5%2C67.567%2C39.5%2C74.133%2C39.5%2C77.417L39.5%2C80.7%22%3E%3C%2Fpath%3E%3Cpath%20marker-end%3D%22url\(%23svg_flowchart-pointEnd\)%22%20style%3D%22fill%3Anone%3B%22%20class%3D%22edge-thickness-normal%20edge-pattern-solid%20flowchart-link%20LS-B%20LE-G%22%20id%3D%22L-B-G-0%22%20d%3D%22M39.5%2C122L39.5%2C126.167C39.5%2C130.333%2C39.5%2C138.667%2C45.015%2C146.51C50.53%2C154.353%2C61.56%2C161.707%2C67.075%2C165.383L72.59%2C169.06%22%3E%3C%2Fpath%3E%3Cpath%20marker-end%3D%22url\(%23svg_flowchart-pointEnd\)%22%20style%3D%22fill%3Anone%3B%22%20class%3D%22edge-thickness-normal%20edge-pattern-solid%20flowchart-link%20LS-A%20LE-C%22%20id%3D%22L-A-C-0%22%20d%3D%22M303.349%2C36L310.374%2C40.167C317.399%2C44.333%2C331.45%2C52.667%2C338.475%2C60.117C345.5%2C67.567%2C345.5%2C74.133%2C345.5%2C77.417L345.5%2C80.7%22%3E%3C%2Fpath%3E%3Cpath%20marker-end%3D%22url\(%23svg_flowchart-pointEnd\)%22%20style%3D%22fill%3Anone%3B%22%20class%3D%22edge-thickness-normal%20edge-pattern-solid%20flowchart-link%20LS-A%20LE-D%22%20id%3D%22L-A-D-0%22%20d%3D%22M233.5%2C34.254L222.667%2C38.711C211.833%2C43.169%2C190.167%2C52.085%2C179.333%2C59.826C168.5%2C67.567%2C168.5%2C74.133%2C168.5%2C77.417L168.5%2C80.7%22%3E%3C%2Fpath%3E%3Cpath%20marker-end%3D%22url\(%23svg_flowchart-pointEnd\)%22%20style%3D%22fill%3Anone%3B%22%20class%3D%22edge-thickness-normal%20edge-pattern-solid%20flowchart-link%20LS-D%20LE-G%22%20id%3D%22L-D-G-0%22%20d%3D%22M168.5%2C122L168.5%2C126.167C168.5%2C130.333%2C168.5%2C138.667%2C162.985%2C146.51C157.47%2C154.353%2C146.44%2C161.707%2C140.925%2C165.383L135.41%2C169.06%22%3E%3C%2Fpath%3E%3Cpath%20marker-end%3D%22url\(%23svg_flowchart-pointEnd\)%22%20style%3D%22fill%3Anone%3B%22%20class%3D%22edge-thickness-normal%20edge-pattern-solid%20flowchart-link%20LS-A%20LE-E%22%20id%3D%22L-A-E-0%22%20d%3D%22M312.5%2C24.034L352.833%2C30.195C393.167%2C36.356%2C473.833%2C48.678%2C514.167%2C58.122C554.5%2C67.567%2C554.5%2C74.133%2C554.5%2C77.417L554.5%2C80.7%22%3E%3C%2Fpath%3E%3Cpath%20marker-end%3D%22url\(%23svg_flowchart-pointEnd\)%22%20style%3D%22fill%3Anone%3B%22%20class%3D%22edge-thickness-normal%20edge-pattern-solid%20flowchart-link%20LS-C%20LE-F%22%20id%3D%22L-C-F-0%22%20d%3D%22M345.5%2C122L345.5%2C126.167C345.5%2C130.333%2C345.5%2C138.667%2C345.5%2C146.117C345.5%2C153.567%2C345.5%2C160.133%2C345.5%2C163.417L345.5%2C166.7%22%3E%3C%2Fpath%3E%3Cpath%20marker-end%3D%22url\(%23svg_flowchart-pointEnd\)%22%20style%3D%22fill%3Anone%3B%22%20class%3D%22edge-thickness-normal%20edge-pattern-solid%20flowchart-link%20LS-E%20LE-Q%22%20id%3D%22L-E-Q-0%22%20d%3D%22M554.5%2C122L554.5%2C126.167C554.5%2C130.333%2C554.5%2C138.667%2C554.5%2C146.117C554.5%2C153.567%2C554.5%2C160.133%2C554.5%2C163.417L554.5%2C166.7%22%3E%3C%2Fpath%3E%3Cpath%20marker-end%3D%22url\(%23svg_flowchart-pointEnd\)%22%20style%3D%22fill%3Anone%3B%22%20class%3D%22edge-thickness-normal%20edge-pattern-solid%20flowchart-link%20LS-Q%20LE-x%22%20id%3D%22L-Q-x-0%22%20d%3D%22M531.453%2C208L523.878%2C213.917C516.302%2C219.833%2C501.151%2C231.667%2C493.576%2C242.617C486%2C253.567%2C486%2C263.633%2C486%2C268.667L486%2C273.7%22%3E%3C%2Fpath%3E%3Cpath%20marker-end%3D%22url\(%23svg_flowchart-pointEnd\)%22%20style%3D%22fill%3Anone%3B%22%20class%3D%22edge-thickness-normal%20edge-pattern-solid%20flowchart-link%20LS-Q%20LE-Y%22%20id%3D%22L-Q-Y-0%22%20d%3D%22M577.547%2C208L585.122%2C213.917C592.698%2C219.833%2C607.849%2C231.667%2C615.424%2C242.617C623%2C253.567%2C623%2C263.633%2C623%2C268.667L623%2C273.7%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3Cg%20class%3D%22edgeLabels%22%3E%3Cg%20class%3D%22edgeLabel%22%3E%3Cg%20transform%3D%22translate\(0%2C%200\)%22%20class%3D%22label%22%3E%3CforeignObject%20height%3D%220%22%20width%3D%220%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22edgeLabel%22%3E%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20class%3D%22edgeLabel%22%3E%3Cg%20transform%3D%22translate\(0%2C%200\)%22%20class%3D%22label%22%3E%3CforeignObject%20height%3D%220%22%20width%3D%220%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22edgeLabel%22%3E%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20class%3D%22edgeLabel%22%3E%3Cg%20transform%3D%22translate\(0%2C%200\)%22%20class%3D%22label%22%3E%3CforeignObject%20height%3D%220%22%20width%3D%220%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22edgeLabel%22%3E%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20class%3D%22edgeLabel%22%3E%3Cg%20transform%3D%22translate\(0%2C%200\)%22%20class%3D%22label%22%3E%3CforeignObject%20height%3D%220%22%20width%3D%220%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22edgeLabel%22%3E%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20class%3D%22edgeLabel%22%3E%3Cg%20transform%3D%22translate\(0%2C%200\)%22%20class%3D%22label%22%3E%3CforeignObject%20height%3D%220%22%20width%3D%220%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22edgeLabel%22%3E%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20class%3D%22edgeLabel%22%3E%3Cg%20transform%3D%22translate\(0%2C%200\)%22%20class%3D%22label%22%3E%3CforeignObject%20height%3D%220%22%20width%3D%220%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22edgeLabel%22%3E%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20class%3D%22edgeLabel%22%3E%3Cg%20transform%3D%22translate\(0%2C%200\)%22%20class%3D%22label%22%3E%3CforeignObject%20height%3D%220%22%20width%3D%220%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22edgeLabel%22%3E%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20class%3D%22edgeLabel%22%3E%3Cg%20transform%3D%22translate\(0%2C%200\)%22%20class%3D%22label%22%3E%3CforeignObject%20height%3D%220%22%20width%3D%220%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22edgeLabel%22%3E%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate\(486%2C%20243.5\)%22%20class%3D%22edgeLabel%22%3E%3Cg%20transform%3D%22translate\(-16%2C%20-10.5\)%22%20class%3D%22label%22%3E%3CforeignObject%20height%3D%2221%22%20width%3D%2232%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22edgeLabel%22%3E%E5%AD%98%E5%9C%A8%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate\(623%2C%20243.5\)%22%20class%3D%22edgeLabel%22%3E%3Cg%20transform%3D%22translate\(-24%2C%20-10.5\)%22%20class%3D%22label%22%3E%3CforeignObject%20height%3D%2221%22%20width%3D%2248%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22edgeLabel%22%3E%E4%B8%8D%E5%AD%98%E5%9C%A8%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20class%3D%22nodes%22%3E%3Cg%20transform%3D%22translate\(273%2C%2018\)%22%20data-id%3D%22A%22%20data-node%3D%22true%22%20id%3D%22flowchart-A-0%22%20class%3D%22node%20default%20default%20flowchart-label%22%3E%3Crect%20height%3D%2236%22%20width%3D%2279%22%20y%3D%22-18%22%20x%3D%22-39.5%22%20ry%3D%220%22%20rx%3D%220%22%20style%3D%22%22%20class%3D%22basic%20label-container%22%3E%3C%2Frect%3E%3Cg%20transform%3D%22translate\(-32%2C%20-10.5\)%22%20style%3D%22%22%20class%3D%22label%22%3E%3Crect%3E%3C%2Frect%3E%3CforeignObject%20height%3D%2221%22%20width%3D%2264%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22nodeLabel%22%3E%E8%B4%A6%E6%9C%AC%E6%93%8D%E4%BD%9C%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate\(39.5%2C%20104\)%22%20data-id%3D%22B%22%20data-node%3D%22true%22%20id%3D%22flowchart-B-1%22%20class%3D%22node%20default%20default%20flowchart-label%22%3E%3Crect%20height%3D%2236%22%20width%3D%2279%22%20y%3D%22-18%22%20x%3D%22-39.5%22%20ry%3D%220%22%20rx%3D%220%22%20style%3D%22%22%20class%3D%22basic%20label-container%22%3E%3C%2Frect%3E%3Cg%20transform%3D%22translate\(-32%2C%20-10.5\)%22%20style%3D%22%22%20class%3D%22label%22%3E%3Crect%3E%3C%2Frect%3E%3CforeignObject%20height%3D%2221%22%20width%3D%2264%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22nodeLabel%22%3E%E5%88%9B%E5%BB%BA%E8%B4%A6%E6%9C%AC%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate\(104%2C%20190\)%22%20data-id%3D%22G%22%20data-node%3D%22true%22%20id%3D%22flowchart-G-3%22%20class%3D%22node%20default%20default%20flowchart-label%22%3E%3Crect%20height%3D%2236%22%20width%3D%22143%22%20y%3D%22-18%22%20x%3D%22-71.5%22%20ry%3D%220%22%20rx%3D%220%22%20style%3D%22%22%20class%3D%22basic%20label-container%22%3E%3C%2Frect%3E%3Cg%20transform%3D%22translate\(-64%2C%20-10.5\)%22%20style%3D%22%22%20class%3D%22label%22%3E%3Crect%3E%3C%2Frect%3E%3CforeignObject%20height%3D%2221%22%20width%3D%22128%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22nodeLabel%22%3E%E9%82%80%E8%AF%B7%E4%BB%96%E4%BA%BA%E5%8A%A0%E5%85%A5%E8%B4%A6%E6%9C%AC%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate\(345.5%2C%20104\)%22%20data-id%3D%22C%22%20data-node%3D%22true%22%20id%3D%22flowchart-C-5%22%20class%3D%22node%20default%20default%20flowchart-label%22%3E%3Crect%20height%3D%2236%22%20width%3D%22111%22%20y%3D%22-18%22%20x%3D%22-55.5%22%20ry%3D%220%22%20rx%3D%220%22%20style%3D%22%22%20class%3D%22basic%20label-container%22%3E%3C%2Frect%3E%3Cg%20transform%3D%22translate\(-48%2C%20-10.5\)%22%20style%3D%22%22%20class%3D%22label%22%3E%3Crect%3E%3C%2Frect%3E%3CforeignObject%20height%3D%2221%22%20width%3D%2296%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22nodeLabel%22%3E%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E8%B4%A6%E6%9C%AC%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate\(168.5%2C%20104\)%22%20data-id%3D%22D%22%20data-node%3D%22true%22%20id%3D%22flowchart-D-7%22%20class%3D%22node%20default%20default%20flowchart-label%22%3E%3Crect%20height%3D%2236%22%20width%3D%2279%22%20y%3D%22-18%22%20x%3D%22-39.5%22%20ry%3D%220%22%20rx%3D%220%22%20style%3D%22%22%20class%3D%22basic%20label-container%22%3E%3C%2Frect%3E%3Cg%20transform%3D%22translate\(-32%2C%20-10.5\)%22%20style%3D%22%22%20class%3D%22label%22%3E%3Crect%3E%3C%2Frect%3E%3CforeignObject%20height%3D%2221%22%20width%3D%2264%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22nodeLabel%22%3E%E7%BC%96%E8%BE%91%E8%B4%A6%E6%9C%AC%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate\(554.5%2C%20104\)%22%20data-id%3D%22E%22%20data-node%3D%22true%22%20id%3D%22flowchart-E-10%22%20class%3D%22node%20default%20default%20flowchart-label%22%3E%3Crect%20height%3D%2236%22%20width%3D%2279%22%20y%3D%22-18%22%20x%3D%22-39.5%22%20ry%3D%220%22%20rx%3D%220%22%20style%3D%22%22%20class%3D%22basic%20label-container%22%3E%3C%2Frect%3E%3Cg%20transform%3D%22translate\(-32%2C%20-10.5\)%22%20style%3D%22%22%20class%3D%22label%22%3E%3Crect%3E%3C%2Frect%3E%3CforeignObject%20height%3D%2221%22%20width%3D%2264%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22nodeLabel%22%3E%E5%88%A0%E9%99%A4%E8%B4%A6%E6%9C%AC%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate\(345.5%2C%20190\)%22%20data-id%3D%22F%22%20data-node%3D%22true%22%20id%3D%22flowchart-F-12%22%20class%3D%22node%20default%20default%20flowchart-label%22%3E%3Crect%20height%3D%2236%22%20width%3D%22175%22%20y%3D%22-18%22%20x%3D%22-87.5%22%20ry%3D%220%22%20rx%3D%220%22%20style%3D%22%22%20class%3D%22basic%20label-container%22%3E%3C%2Frect%3E%3Cg%20transform%3D%22translate\(-80%2C%20-10.5\)%22%20style%3D%22%22%20class%3D%22label%22%3E%3Crect%3E%3C%2Frect%3E%3CforeignObject%20height%3D%2221%22%20width%3D%22160%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22nodeLabel%22%3E%E6%9B%B4%E6%96%B0%E5%85%B6%E4%BB%96%E8%B4%A6%E6%9C%AC%E4%B8%BA%E9%9D%9E%E9%BB%98%E8%AE%A4%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate\(554.5%2C%20190\)%22%20data-id%3D%22Q%22%20data-node%3D%22true%22%20id%3D%22flowchart-Q-14%22%20class%3D%22node%20default%20default%20flowchart-label%22%3E%3Crect%20height%3D%2236%22%20width%3D%22143%22%20y%3D%22-18%22%20x%3D%22-71.5%22%20ry%3D%220%22%20rx%3D%220%22%20style%3D%22%22%20class%3D%22basic%20label-container%22%3E%3C%2Frect%3E%3Cg%20transform%3D%22translate\(-64%2C%20-10.5\)%22%20style%3D%22%22%20class%3D%22label%22%3E%3Crect%3E%3C%2Frect%3E%3CforeignObject%20height%3D%2221%22%20width%3D%22128%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22nodeLabel%22%3E%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BA%A4%E6%98%93%E8%AE%B0%E5%BD%95%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate\(486%2C%20297\)%22%20data-id%3D%22x%22%20data-node%3D%22true%22%20id%3D%22flowchart-x-16%22%20class%3D%22node%20default%20default%20flowchart-label%22%3E%3Crect%20height%3D%2236%22%20width%3D%2295%22%20y%3D%22-18%22%20x%3D%22-47.5%22%20ry%3D%220%22%20rx%3D%220%22%20style%3D%22%22%20class%3D%22basic%20label-container%22%3E%3C%2Frect%3E%3Cg%20transform%3D%22translate\(-40%2C%20-10.5\)%22%20style%3D%22%22%20class%3D%22label%22%3E%3Crect%3E%3C%2Frect%3E%3CforeignObject%20height%3D%2221%22%20width%3D%2280%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22nodeLabel%22%3E%E4%B8%8D%E5%85%81%E8%AE%B8%E5%88%A0%E9%99%A4%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate\(623%2C%20297\)%22%20data-id%3D%22Y%22%20data-node%3D%22true%22%20id%3D%22flowchart-Y-18%22%20class%3D%22node%20default%20default%20flowchart-label%22%3E%3Crect%20height%3D%2236%22%20width%3D%2279%22%20y%3D%22-18%22%20x%3D%22-39.5%22%20ry%3D%220%22%20rx%3D%220%22%20style%3D%22%22%20class%3D%22basic%20label-container%22%3E%3C%2Frect%3E%3Cg%20transform%3D%22translate\(-32%2C%20-10.5\)%22%20style%3D%22%22%20class%3D%22label%22%3E%3Crect%3E%3C%2Frect%3E%3CforeignObject%20height%3D%2221%22%20width%3D%2264%22%3E%3Cdiv%20style%3D%22display%3A%20inline-block%3B%20white-space%3A%20nowrap%3B%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cspan%20class%3D%22nodeLabel%22%3E%E5%85%81%E8%AE%B8%E5%88%A0%E9%99%A4%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E)

2.3.3 账目分类管理流程  


![](https://cdn.nlark.com/yuque/__mermaid_v3/1cf447af2186340413729cfee0c0c384.svg)

所有表都采用软删除策略（is\_valid 字段），保证数据的可追溯性。同时，关键操作都有相应的错误处理和数据验证机制。  
  
  


3 数据初始化设计  


3.1 分类数据初始化  


3.2 资产分类主数据  


3.2.1 资产分类主数据  


3.2.2 财务表设计  
  


​

若有收获，就点个赞吧
