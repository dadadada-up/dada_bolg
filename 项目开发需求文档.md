# 个人博客平台开发需求文档

## 1. 项目概述

### 1.1 项目背景
本项目旨在创建一个个人博客平台，以 GitHub 仓库 (https://github.com/dadadada-up/dada_bolg) 作为内容源，实现内容的展示与管理。平台将采用现代化前端技术栈，提供美观、高效、易用的博客体验。

### 1.2 项目目标
- 构建一个高性能、美观且功能丰富的个人博客系统
- 实现 GitHub 仓库与博客平台的无缝集成
- 支持自定义主题和个性化展示
- 提供良好的 SEO 优化和用户体验
- 支持响应式设计，适配各种设备

### 1.3 用户画像
- **主要用户**：博客所有者（内容创作者）
- **次要用户**：博客访客（内容消费者）
- **使用场景**：
  - 博主在 GitHub 仓库中编写和管理 Markdown 文章
  - 访客通过博客网站浏览文章、搜索内容、进行互动

## 2. 技术架构

### 2.1 技术选型
- **前端框架**：Next.js 14（React 18 + TypeScript）
- **样式系统**：Tailwind CSS + shadcn/ui 组件库
- **内容处理**：
  - GitHub API 获取内容
  - MDX 支持（Markdown 增强）
  - remark/rehype 生态系统处理 Markdown
- **数据获取**：SWR 或 React Query
- **部署平台**：Vercel

### 2.2 系统架构图
```
+------------------------+       +--------------------+
|   GitHub仓库           |       |   前端展示层       |
|  +----------------+   |       |  +--------------+  |
|  | Markdown文档    |  | <---> |  | Next.js应用  |  |
|  +----------------+   |       |  +--------------+  |
|  +----------------+   |       |  +--------------+  |
|  | GitHub Actions  |  |       |  | 静态页面     |  |
|  +----------------+   |       |  +--------------+  |
+------------------------+       +--------------------+
```

### 2.3 关键技术点
- **静态生成（SSG）**：预渲染页面提高性能和 SEO
- **增量静态再生成（ISR）**：实现内容更新
- **Markdown 处理**：支持代码高亮、数学公式、表格等高级功能
- **图片优化**：使用 Next.js Image 组件优化图片加载
- **路由系统**：基于 Next.js App Router

## 3. 功能需求

### 3.1 核心功能
#### 3.1.1 内容获取
- **支持的文档类型**：
  - Markdown 文档（完全支持）
  - MDX 文档（支持组件嵌入）

- **获取方式**：
  - 使用 GitHub API 获取仓库内容
  - 支持增量更新，减少不必要的 API 调用
  - 实现内容缓存，提高加载速度

- **元数据处理**：
  - 解析 Front Matter 获取文章元数据
  - 提取标题、时间、分类、标签等信息
  - 生成文章摘要和索引

#### 3.1.2 文章展示
- **文章列表页**：
  - 分页展示文章列表，每页显示 10-15 篇文章
  - 每篇文章显示标题、发布日期、分类、标签、摘要和封面图
  - 支持按发布时间、更新时间排序
  - 支持无限滚动或分页导航

- **文章详情页**：
  - 文章标题、元数据（发布时间、更新时间、分类、标签）
  - 文章正文（支持 Markdown 所有语法渲染）
  - 代码块语法高亮（支持常见编程语言）
  - 数学公式渲染（支持 LaTeX 语法）
  - 目录导航（自动生成 TOC，支持滚动同步高亮）
  - 相关文章推荐
  - 上一篇/下一篇导航

- **分类页面**：
  - 展示所有文章分类，包括分类名称和文章数量
  - 点击分类显示该分类下的所有文章
  - 支持分类嵌套（父分类和子分类）

- **标签页面**：
  - 展示所有文章标签，支持标签云形式展示
  - 点击标签显示该标签下的所有文章
  - 支持标签权重展示（使用频率越高标签越大）

- **归档页面**：
  - 按时间轴形式展示所有文章
  - 支持按年、月分组展示
  - 显示文章发布日期和标题

#### 3.1.3 搜索功能
- **全文搜索**：
  - 支持文章标题、正文、标签的全文搜索
  - 支持关键词高亮显示
  - 支持搜索结果按相关度、时间排序
  - 支持搜索提示和自动补全

- **实现方式**：
  - 客户端搜索（适用于小型博客）：使用 Flexsearch 等库
  - 服务端搜索：可选集成 Algolia 等搜索服务

#### 3.1.4 响应式设计
- **设备适配**：
  - 桌面端（宽屏）：1920px、1440px、1366px、1280px
  - 平板端：1024px、768px
  - 移动端：414px、375px、320px
  
- **布局调整**：
  - 大屏：三栏布局（导航、内容、侧边栏）
  - 平板：两栏布局（内容、侧边栏）
  - 手机：单栏布局（内容为主，导航可折叠）

### 3.2 扩展功能
#### 3.2.1 评论系统（可选）
- 支持集成 Giscus（基于 GitHub Discussions）
- 支持回复、点赞等互动功能
- 支持 Markdown 格式评论

#### 3.2.2 主题切换
- 支持亮色/暗色主题切换
- 自动根据系统偏好切换
- 主题偏好持久化存储

#### 3.2.3 社交分享
- 支持分享文章到主要社交平台
- 自定义分享内容（标题、摘要、图片）
- 生成适合社交媒体的预览卡片

#### 3.2.4 阅读辅助功能
- 估计阅读时间
- 字数统计
- 阅读进度条
- 返回顶部按钮

## 4. 页面设计与路由结构

### 4.1 页面结构
- **首页**：`/`
  - 头部：网站标题、导航菜单、搜索按钮、主题切换
  - 主体：置顶文章、最新文章列表
  - 侧边栏：个人简介、分类/标签云、最近更新
  - 页脚：版权信息、联系方式、备案信息

- **文章详情页**：`/posts/[slug]`
  - 头部：文章标题、元数据
  - 主体：文章内容、目录导航
  - 底部：相关文章、评论区

- **分类页**：`/categories/[category]`
  - 分类列表
  - 分类下文章列表

- **标签页**：`/tags/[tag]`
  - 标签云
  - 标签下文章列表

- **归档页**：`/archives`
  - 时间轴形式的文章列表

- **搜索页**：`/search`
  - 搜索框与搜索选项
  - 搜索结果列表

- **关于页**：`/about`
  - 个人介绍
  - 博客介绍

### 4.2 组件结构
- **布局组件**：
  - `Layout`：页面整体布局
  - `Header`：页面头部
  - `Footer`：页面底部
  - `Sidebar`：侧边栏

- **文章相关组件**：
  - `PostList`：文章列表
  - `PostCard`：文章卡片
  - `PostContent`：文章内容
  - `TableOfContents`：目录导航
  - `CategoryList`：分类列表
  - `TagCloud`：标签云

- **交互组件**：
  - `Search`：搜索框
  - `Pagination`：分页
  - `ThemeToggle`：主题切换
  - `BackToTop`：返回顶部

## 5. 数据模型设计

### 5.1 文章数据模型
```typescript
interface Post {
  slug: string;             // URL友好的路径
  title: string;            // 文章标题
  content: string;          // Markdown内容
  html?: string;            // 渲染后的HTML（可选缓存）
  coverImage?: string;      // 封面图URL
  excerpt?: string;         // 文章摘要
  date: string;             // 创建时间
  updated?: string;         // 更新时间
  published: boolean;       // 是否发布
  featured?: boolean;       // 是否推荐
  categories: string[];     // 分类
  tags: string[];           // 标签
  metadata: {               // 元数据
    wordCount: number;      // 字数统计
    readingTime: number;    // 阅读时间（分钟）
    [key: string]: any;     // 其他元数据
  }
}
```

### 5.2 分类数据模型
```typescript
interface Category {
  name: string;             // 分类名称
  slug: string;             // URL友好的路径
  description?: string;     // 分类描述
  parentCategory?: string;  // 父分类
  postCount: number;        // 文章数量
}
```

### 5.3 标签数据模型
```typescript
interface Tag {
  name: string;             // 标签名称
  slug: string;             // URL友好的路径
  postCount: number;        // 文章数量
}
```

## 6. API设计

### 6.1 GitHub API调用
- **获取仓库内容列表**：
  ```
  GET /repos/:owner/:repo/contents/:path
  ```

- **获取文件内容**：
  ```
  GET /repos/:owner/:repo/contents/:path
  ```

- **获取提交历史**：
  ```
  GET /repos/:owner/:repo/commits?path=:path
  ```

### 6.2 内部API路由
- **获取文章列表**：
  ```
  GET /api/posts?page=:page&limit=:limit
  ```

- **获取单篇文章**：
  ```
  GET /api/posts/:slug
  ```

- **获取分类列表**：
  ```
  GET /api/categories
  ```

- **获取标签列表**：
  ```
  GET /api/tags
  ```

- **搜索文章**：
  ```
  GET /api/search?q=:query
  ```

## 7. 性能优化策略

### 7.1 构建时优化
- 使用静态生成（SSG）预渲染页面
- 实现增量静态再生成（ISR）更新内容
- 代码分割与懒加载优化
- 图片自动优化（格式、尺寸）

### 7.2 运行时优化
- 客户端内容缓存
- 懒加载组件和图片
- 预加载下一页内容
- 减少不必要的渲染
- 优化字体加载

### 7.3 SEO优化
- 优化元标签（title、description）
- 自动生成结构化数据（JSON-LD）
- 实现语义化HTML
- 自动生成站点地图（sitemap）
- 移动端优化

## 8. 开发与部署计划

### 8.1 开发阶段
1. **初始化项目**：
   - 创建 Next.js 项目
   - 配置 TypeScript、ESLint、Prettier
   - 设置基础目录结构

2. **基础框架搭建**：
   - 实现基础布局组件
   - 添加主题切换功能
   - 配置路由结构

3. **核心功能开发**：
   - 实现 GitHub API 集成
   - 开发 Markdown 渲染系统
   - 实现文章列表和详情页

4. **扩展功能开发**：
   - 添加搜索功能
   - 实现分类和标签系统
   - 集成评论系统（如需）

5. **优化与测试**：
   - 性能优化
   - SEO 优化
   - 跨浏览器测试
   - 移动端适配测试

### 8.2 部署计划
1. **准备部署环境**：
   - 创建 Vercel 账号和项目
   - 配置环境变量

2. **CI/CD 配置**：
   - 配置自动构建和部署
   - 设置预览环境和生产环境

3. **监控与分析**：
   - 集成 Google Analytics 或其他分析工具
   - 设置错误监控

4. **维护计划**：
   - 定期更新依赖
   - 优化性能
   - 添加新功能

## 9. 项目管理与时间线

### 9.1 项目阶段
- **规划阶段**：1周
  - 需求分析
  - 技术选型
  - 架构设计

- **开发阶段**：4-6周
  - 核心功能：2-3周
  - 扩展功能：1-2周
  - 优化与测试：1周

- **部署与上线**：1周
  - 部署配置
  - 最终测试
  - 正式上线

### 9.2 里程碑
1. **基础框架完成**：项目初始化，基础组件和布局实现
2. **核心功能实现**：内容获取、展示和基本导航完成
3. **扩展功能完成**：搜索、分类、标签系统实现
4. **优化阶段完成**：性能和SEO优化完成
5. **正式上线**：博客平台完全部署并投入使用

## 10. 参考资源

### 10.1 技术文档
- [Next.js 官方文档](https://nextjs.org/docs)
- [React 官方文档](https://reactjs.org/docs)
- [Tailwind CSS 文档](https://tailwindcss.com/docs)
- [GitHub API 文档](https://docs.github.com/en/rest)

### 10.2 设计参考
- [shadcn/ui](https://ui.shadcn.com/)
- [Next.js 博客模板](https://github.com/vercel/next.js/tree/canary/examples/blog-starter)

### 10.3 开发工具
- VSCode
- Git
- Node.js
- npm/yarn/pnpm

---

**注意**：本文档会随着项目进展不断更新，请以最新版本为准。 